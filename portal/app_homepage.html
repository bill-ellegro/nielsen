<!DOCTYPE html>

<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8" />

  <!-- Set the viewport width to device width for mobile -->
  <meta name="viewport" content="width=device-width" />

  <title>Nielsen Portal Master Page</title>
  
  <!-- Included CSS Files (Uncompressed) -->
  <!--
  <link rel="stylesheet" href="stylesheets/foundation.css">
  -->
  
  <!-- Included CSS Files (Compressed) -->
  <link rel="stylesheet" href="stylesheets/foundation.min.css">

  <!-- FONTS + APP CSS -->
  <link href="stylesheets/ui-lightness/jquery-ui-1.10.3.custom.css" rel="stylesheet">
  <!-- <link rel="stylesheet" type="text/css" href="stylesheets/MyFontsWebfontsKit.css"> -->
  <link rel="stylesheet" href="stylesheets/elsmaster.css">
  <link rel="stylesheet" href="stylesheets/program-stack.css">
  
  <!-- App CSS -->
  <link rel="stylesheet" href="stylesheets/app.css">

  <script src="javascripts/modernizr.foundation.js"></script>
</head>
<body>

  <div class="row headerrow">
    <div class="twelve columns">
      <div class="headline"><span class="neilsenlogo"><img src="images/nielsen_logo.png"></span>MY LEARNING NETWORK</div>
    </div>
  </div>
  <div class="row navrow">
    <div class="twelve columns">
      <a class="navtitles active" href="app_homepage.html">HOME</a>
      <a class="navtitles" href="app_learningopportunities.html">LEARNING OPPORTUNITIES</a>
      <a class="navtitles" href="app_myprofile.html">MY PROFILE</a>
      <a class="navtitles" href="#">DISCUSSIONS</a>       
    </div>
  </div>
  <div class="row welcomerow">
    <div class="twelve columns mobile-four">
      <div class="welcometitle">
        <span id="welcomeid">WELCOME ANDREW</span><span style="margin:0px 23px;">|</span><span id="profileid">YOUR PROFILE</span>
        <div class="profilemeter">
          <div class="welcomeprofile">
            <div id="profilepercent" style="width:54%">54%</div>
          </div>
        </div>
        <span style="margin:0px 23px;">|</span>
        <div class="searchcontainer">
          <input type="text" placeholder="search" style="display:inline; width:160px; font-size:12px; height:18px; margin:0px; padding:0px 2px; background-color:#000; color:#f1f1f1; text-transform:uppercase; background: url('images/search.png') no-repeat right;">
        </div>
      </div>
    </div>
  </div>
  <div class="row contentrow">
    <div class="viewcontainer">
      additional functionality (dropdown goes here). Alerts are phase 2.
    </div>
    <div id="cardscontainer">
      <div id="templatecard">
        <div class="three columns" id="card">
          <div class="programcard-home">
            <div class="programalert"><img src="images/program-alert-notif.png"></div>
            <div class="programtitlecontainer">
              <div class="three columns">
                <img src="images/programcard-icon.png">
              </div>
              <div class="nine columns">
                <span class="programtitle">Title Text A BSE A EEE Wrap</span>
              </div>
            </div>
            <div class="twelve columns">
              <p class="programcard-descr">What et lacea deliqui restam deliqui restam deliqui restam deliqui restam deliqui restam deliqui restam deliqui restam deliqui <br/><br/><a>More Details &gt;</a></p>
            </div>
            <div>
              <div style="margin-left:20px; display:inline;">
                <img src="images/ratings.png" >
              </div>
              <div style="margin-left:10px; display:inline;">
                <img src="images/discussions.png">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row footerrow">
    <div class="twelve columns">
      footer row
    </div>
  </div>

  <div id="programDetailsModal" class="reveal-modal program-modal">
    <div class="row">
      <div class="eight columns">
        <h2 id="programDetailsTitle">Program Name Can Wrap to Two Lines if Need Lorem Ipsum</h2>

        <p>
          <a 
          href="#"><img src="images/icon-rating-star-unselected.png" alt=""/></a><a 
          href="#"><img src="images/icon-rating-star-unselected.png" alt=""/></a><a 
          href="#"><img src="images/icon-rating-star-unselected.png" alt=""/></a><a 
          href="#"><img src="images/icon-rating-star-unselected.png" alt=""/></a><a 
          href="#"><img src="images/icon-rating-star-unselected.png" alt=""/></a><a 
          href="#">Rate this program widget goes here&gt;</a>
        </p>

        <h4><strong>Status:</strong> <span id="programDetailsStatus">Recommended</span></h4>
        <p><span id="programDetailsDescription">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque facilisis justo ac turpis ornare blandit. Pellentesque convallis a elit vel luctus. Cras non tellus sed arcu lacinia vestibulum quis...</span></p>

        <button class="action" id="programDetailsAction">Next Action</button>

        <div class="row container-prog-details">
          <div class="eight columns">
            <h5>Program Details</h5>
            <ul class="no-bullets" id="programDetailsAdditionals">
              <li><span class="label">Type:</span> Accumenis asimintis</li>
              <li><span class="label">Location:</span> Accumenis asimintis</li>
              <li><span class="label">Skill:</span> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque facilisis justo ac turpis ornare blandit. Pellentesque convallis a elit vel luctus.</li>
            </ul> <!-- /.no-bullets -->
          </div>  <!-- /.eight.columns -->
        </div>  <!-- /.row -->
      </div>  <!-- /.eight.columns -->

      <div class="four columns container-related-content">
        <h5>Related Content</h5>
        <div id="programDetailsRelatedItems">
          <div class="item">
            <h6>Content 1</h6>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque facilisis justo ac...</p>
            <p class="more-details"><a href="#">More Details &gt;</a></p>
          </div>  <!-- /.item -->

          <div class="item">
            <h6>Content 2</h6>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque facilisis justo ac...</p>
            <p class="more-details"><a href="#">More Details &gt;</a></p>
          </div>  <!-- /.item -->

          <div class="item">
            <h6>Content 3</h6>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque facilisis justo ac...</p>
            <p class="more-details"><a href="#">More Details &gt;</a></p>
          </div>  <!-- /.item -->

          <div class="item">
            <h6>Content 4</h6>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque facilisis justo ac...</p>
            <p class="more-details"><a href="#">More Details &gt;</a></p>
          </div>  <!-- /.item -->
        </div>
        <button>Load More</button>
      </div>  <!-- /.four.columns -->
    </div>  <!-- /.row -->

    <a class="close-reveal-modal">x</a>
  </div>  <!-- /#program1.reveal-modal.program-modal -->
  
  
  <!-- Included JS Files (Uncompressed) -->
  <!--
  <script src="javascripts/jquery.js"></script>
  <script src="javascripts/jquery.foundation.mediaQueryToggle.js"></script>
  <script src="javascripts/jquery.foundation.forms.js"></script>
  <script src="javascripts/jquery.event.move.js"></script>
  <script src="javascripts/jquery.event.swipe.js"></script>
  <script src="javascripts/jquery.foundation.reveal.js"></script>
  <script src="javascripts/jquery.foundation.orbit.js"></script>
  <script src="javascripts/jquery.foundation.navigation.js"></script>
  <script src="javascripts/jquery.foundation.tabs.js"></script>
  <script src="javascripts/jquery.foundation.topbar.js"></script>
  <script src="javascripts/jquery.foundation.joyride.js"></script>
  <script src="javascripts/jquery.foundation.clearing.js"></script>
  <script src="javascripts/jquery.foundation.magellan.js"></script>
  
  -->
  
  <!-- Included JS Files (Compressed) -->
  <script src="javascripts/jquery-1.9.1.js"></script>
  <script src="javascripts/jquery-ui-1.10.3.custom.js"></script>
  <script src="javascripts/foundation.min.js"></script>
  
  <!-- Initialize JS Plugins -->
  <script src="javascripts/iqapi.js"></script>
  <script src="javascripts/app.js"></script>

    <script type="text/javascript">
      /* GLOBAL VARS */
      var PROGRAMS_HASH = new Array();

      /* SESSION VARS COMING FROM THE SSO!!! */
      var CURRENT_PERSONID = "niraj.swami@ellegrolearning.com";
      CURRENT_PERSONID=prompt("Provide email address:\n","niraj.swami@ellegrolearning.com");
      if (CURRENT_PERSONID==null || CURRENT_PERSONID==""){
        CURRENT_PERSONID = "niraj.swami@ellegrolearning.com";
      }
    </script>

    <script>
    $(window).load(function(){
      //
      $('#cardscontainer').hide();
      // we only look for fresh discovery (not for already 'consumed' discovery)
      IQ_GetOpenProgramsForPerson(CURRENT_PERSONID, function(json){
        // populate data here
        var content_arr = json.iqmatches;
        PROGRAMS_HASH = new Array();
        //
        $('#cardscontainer').html('');
        var rounder = 0;
        //
        for (var i = 0;i<Math.min(8,content_arr.length);i++){
          rounder++;
          //
          var currProgramBasics = content_arr[i];
          PROGRAMS_HASH[currProgramBasics.contentid] = currProgramBasics;
          //
          var itemHTML = '';
          itemHTML += '<div class="three columns">';
            itemHTML += '<div class="programcard-home">';
              itemHTML += '<div class="programalert"><img src="images/program-alert-notif.png"></div>';
              itemHTML += '<div class="programtitlecontainer">';
                itemHTML += '<div class="three columns">';
                  itemHTML += '<img src="images/programcard-icon.png">';
                itemHTML += '</div>';
                itemHTML += '<div class="nine columns">';
                  itemHTML += '<span class="programtitle">'+currProgramBasics.contenttitle+'</span>';
                itemHTML += '</div>';
              itemHTML += '</div>';
              itemHTML += '<div class="twelve columns">';
                itemHTML += '<p class="programcard-descr">'+("What et lacea deliqui restam deliqui restam deliqui restam deliqui restam deliqui restam deliqui restam deliqui restam deliqui ")+'<br/><br/><br/><a onclick="showProgramDetails(\''+currProgramBasics.contentid+'\')">More Details &gt;</a></p>';
              itemHTML += '</div>';
              itemHTML += '<div class="row actions-row">';
                itemHTML += '<div class="six columns">';
                  itemHTML += '<div class="icon-link rating-widget"><a href="#">Rate</a></div>';
                itemHTML += '</div>';
                itemHTML += '<div class="six columns">';
                  itemHTML += '<div class="icon-link discussion-widget"><a href="#">Discuss</a></div>';
                itemHTML += '</div>';
              itemHTML += '</div>';
            itemHTML += '</div>';
          itemHTML += '</div>';
          //
          $('#cardscontainer').append(itemHTML);
          //
        }
        for (var r = 0;r<(4-rounder%4);r++){
          $('#cardscontainer').append('<div class="three columns">lazy loading pending</div>')
        }
        //
        $('#cardscontainer').fadeIn(450);
      });

    });

    function showProgramDetails(contentid){
      //
      var progObj = PROGRAMS_HASH[contentid];
      //
      IQ_GetContentExtendedDetails(contentid, CURRENT_PERSONID, function(json){
        $('#programDetailsTitle').html(progObj.contenttitle);
        //
        $('#programDetailsModal').reveal();
        //
      });
      //
      
    }


    function getSampleCards(templatediv){
      var template = $('#'+templatediv).html();
      var ret_str = '';
      for (var i=0;i<(4+Math.round(Math.random()*4));i++){
        ret_str += template;
      }
      return ret_str;
    }
    </script> 
  
</body>
</html>
